# Copy Constructor 复制构造函数

## 定义

复制构造函数是一种特殊的构造函数，其形参为本类的对象引用。作用是用一个已存在的对象去初始化同类型的新对象。

```c++
class 类名 {
public :
类名（形参）；//构造函数
类名（const 类名 &对象名）；//复制构造函数
// ...
}；
类名::类（ const 类名 &对象名）//复制构造函数的实现
{ 函数体 }
```

这里有const是因为传递引用作为参数时，实际上时可以双向传递参数的，也就是说接收这个引用的函数如果在函数体中对形参做了修改，那么实参也会同步修改。

## 复制构造函数被调用的三种情况

- 定义一个对象时，以本类另一个对象作为初始值，发生复制构造；
- 如果函数的形参是类的对象，调用函数时，将使用实参对象初始化形参对象，发生复制构造；
- 如果函数的返回值是类的对象，函数执行完成返回主调函数时，将使用return语句中的对象初始化一个临时无名对象，传递给主调函数，此时发生复制构造。
  - 这种情况也可以通过移动构造避免不必要的复制（第6章介绍）

## 隐含的复制构造函数

- 如果在定义一个类的时候没有声明复制构造函数，编译器会自己生成一个隐含的复制构造函数。
- 这个构造函数执行的功能是：用作为初始值的对象的每个数据成员的值，初始化将要建立的对象的对应数据成员。

## “=delete”

- 如果不希望对象被复制构造
  -  C++98做法：将复制构造函数声明为private，并且不提供函数的实现。 
  - C++11做法：用“=delete”指示编译器不生成默认复制构造函数。

例：

```c++
class Point { //Point 类的定义
public:
Point(int xx=0, int yy=0) { x = xx; y = yy; } //构造函数，内联
Point(const Point& p) =delete; //指示编译器不生成默认复制构造函数
private:
int x, y; //私有数据
};
```

